{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createNewUserRecord } from \"./firestore\";\nimport firebase from \"firebase/compat/app\";\nimport { firebaseConfig } from \"./firebaseConfig\";\nimport store from \"../state/store\";\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n}\nexport function login(_x, _x2) {\n  return _login.apply(this, arguments);\n}\nfunction _login() {\n  _login = _asyncToGenerator(function* (email, password) {\n    var _result$user, _result$user2;\n    var result = yield firebase.auth().signInWithEmailAndPassword(email, password);\n    store.dispatch({\n      type: \"LOGIN\",\n      name: (_result$user = result.user) == null ? void 0 : _result$user.displayName,\n      uid: (_result$user2 = result.user) == null ? void 0 : _result$user2.uid\n    });\n  });\n  return _login.apply(this, arguments);\n}\nexport function register(_x3, _x4, _x5) {\n  return _register.apply(this, arguments);\n}\nfunction _register() {\n  _register = _asyncToGenerator(function* (name, email, password) {\n    var _result$user3, _result$user4, _result$user5;\n    console.log(\"clicked\");\n    var result = yield firebase.auth().createUserWithEmailAndPassword(email, password);\n    yield (_result$user3 = result.user) == null ? void 0 : _result$user3.updateProfile({\n      displayName: name\n    });\n    createNewUserRecord(name, email, result.user.uid);\n    store.dispatch({\n      type: \"LOGIN\",\n      name: (_result$user4 = result.user) == null ? void 0 : _result$user4.displayName,\n      uid: (_result$user5 = result.user) == null ? void 0 : _result$user5.uid,\n      isNewUser: true\n    });\n  });\n  return _register.apply(this, arguments);\n}\nexport function logout() {\n  return _logout.apply(this, arguments);\n}\nfunction _logout() {\n  _logout = _asyncToGenerator(function* () {\n    console.log(\"Logging out\");\n    yield firebase.auth().signOut();\n    store.dispatch({\n      type: \"LOGOUT\"\n    });\n  });\n  return _logout.apply(this, arguments);\n}","map":{"version":3,"names":["createNewUserRecord","firebase","firebaseConfig","store","apps","length","initializeApp","login","_x","_x2","_login","apply","arguments","_asyncToGenerator","email","password","_result$user","_result$user2","result","auth","signInWithEmailAndPassword","dispatch","type","name","user","displayName","uid","register","_x3","_x4","_x5","_register","_result$user3","_result$user4","_result$user5","console","log","createUserWithEmailAndPassword","updateProfile","isNewUser","logout","_logout","signOut"],"sources":["/Users/chengchuan/Coding/Projects/LifeHack-2023/services/auth.ts"],"sourcesContent":["import { createNewUserRecord } from \"./firestore\";\nimport firebase from \"firebase/compat/app\";\nimport { firebaseConfig } from \"./firebaseConfig\";\nimport store from \"../state/store\";\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n}\n\nexport async function login(email: string, password: string) {\n  const result = await firebase\n    .auth()\n    .signInWithEmailAndPassword(email, password);\n  store.dispatch({\n    type: \"LOGIN\",\n    name: result.user?.displayName,\n    uid: result.user?.uid,\n  });\n}\n\nexport async function register(name: string, email: string, password: string) {\n  console.log(\"clicked\");\n  const result = await firebase\n    .auth()\n    .createUserWithEmailAndPassword(email, password);\n  await result.user?.updateProfile({ displayName: name });\n  createNewUserRecord(name, email, result.user!.uid);\n  store.dispatch({\n    type: \"LOGIN\",\n    name: result.user?.displayName,\n    uid: result.user?.uid,\n    isNewUser: true,\n  });\n}\n\nexport async function logout() {\n  console.log(\"Logging out\");\n  await firebase.auth().signOut();\n  store.dispatch({ type: \"LOGOUT\" });\n}\n"],"mappings":";AAAA,SAASA,mBAAmB;AAC5B,OAAOC,QAAQ,MAAM,qBAAqB;AAC1C,SAASC,cAAc;AACvB,OAAOC,KAAK;AAEZ,IAAI,CAACF,QAAQ,CAACG,IAAI,CAACC,MAAM,EAAE;EACzBJ,QAAQ,CAACK,aAAa,CAACJ,cAAc,CAAC;AACxC;AAEA,gBAAsBK,KAAKA,CAAAC,EAAA,EAAAC,GAAA;EAAA,OAAAC,MAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAS1B,SAAAF,OAAA;EAAAA,MAAA,GAAAG,iBAAA,CATM,WAAqBC,KAAa,EAAEC,QAAgB,EAAE;IAAA,IAAAC,YAAA,EAAAC,aAAA;IAC3D,IAAMC,MAAM,SAASjB,QAAQ,CAC1BkB,IAAI,CAAC,CAAC,CACNC,0BAA0B,CAACN,KAAK,EAAEC,QAAQ,CAAC;IAC9CZ,KAAK,CAACkB,QAAQ,CAAC;MACbC,IAAI,EAAE,OAAO;MACbC,IAAI,GAAAP,YAAA,GAAEE,MAAM,CAACM,IAAI,qBAAXR,YAAA,CAAaS,WAAW;MAC9BC,GAAG,GAAAT,aAAA,GAAEC,MAAM,CAACM,IAAI,qBAAXP,aAAA,CAAaS;IACpB,CAAC,CAAC;EACJ,CAAC;EAAA,OAAAhB,MAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAED,gBAAsBe,QAAQA,CAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,SAAA,CAAApB,KAAA,OAAAC,SAAA;AAAA;AAa7B,SAAAmB,UAAA;EAAAA,SAAA,GAAAlB,iBAAA,CAbM,WAAwBU,IAAY,EAAET,KAAa,EAAEC,QAAgB,EAAE;IAAA,IAAAiB,aAAA,EAAAC,aAAA,EAAAC,aAAA;IAC5EC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;IACtB,IAAMlB,MAAM,SAASjB,QAAQ,CAC1BkB,IAAI,CAAC,CAAC,CACNkB,8BAA8B,CAACvB,KAAK,EAAEC,QAAQ,CAAC;IAClD,OAAAiB,aAAA,GAAMd,MAAM,CAACM,IAAI,qBAAXQ,aAAA,CAAaM,aAAa,CAAC;MAAEb,WAAW,EAAEF;IAAK,CAAC,CAAC;IACvDvB,mBAAmB,CAACuB,IAAI,EAAET,KAAK,EAAEI,MAAM,CAACM,IAAI,CAAEE,GAAG,CAAC;IAClDvB,KAAK,CAACkB,QAAQ,CAAC;MACbC,IAAI,EAAE,OAAO;MACbC,IAAI,GAAAU,aAAA,GAAEf,MAAM,CAACM,IAAI,qBAAXS,aAAA,CAAaR,WAAW;MAC9BC,GAAG,GAAAQ,aAAA,GAAEhB,MAAM,CAACM,IAAI,qBAAXU,aAAA,CAAaR,GAAG;MACrBa,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC;EAAA,OAAAR,SAAA,CAAApB,KAAA,OAAAC,SAAA;AAAA;AAED,gBAAsB4B,MAAMA,CAAA;EAAA,OAAAC,OAAA,CAAA9B,KAAA,OAAAC,SAAA;AAAA;AAI3B,SAAA6B,QAAA;EAAAA,OAAA,GAAA5B,iBAAA,CAJM,aAAwB;IAC7BsB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;IAC1B,MAAMnC,QAAQ,CAACkB,IAAI,CAAC,CAAC,CAACuB,OAAO,CAAC,CAAC;IAC/BvC,KAAK,CAACkB,QAAQ,CAAC;MAAEC,IAAI,EAAE;IAAS,CAAC,CAAC;EACpC,CAAC;EAAA,OAAAmB,OAAA,CAAA9B,KAAA,OAAAC,SAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}